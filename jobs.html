<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings - Sirius Jobs</title>
    <meta name="description" content="Browse and post job listings for skilled blue-collar workers in Nigeria. Find electricians, plumbers, cleaners, and artisans.">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0056b3',
                        secondary: '#808080',
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="api.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .animated-gradient {
            background-size: 200% 200%;
            animation: gradient-shift 15s ease infinite;
        }

        .job-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .job-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 86, 179, 0.15);
        }
    </style>
  <link rel="stylesheet" href="assets/site-shell.css">
</head>

<body class="bg-white text-gray-800">
    <!-- Modern Fixed Navigation -->
    <nav class="fixed w-full top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200/50">
        <div class="container mx-auto px-4 lg:px-6">
            <div class="flex items-center justify-between h-16">
                <a href="index.html" class="flex items-center gap-3 group">
                    <img src="images/logo.png" alt="SIRIUS JOBS" class="w-16 h-16 drop-shadow-2xl transition-transform group-hover:scale-110">
                    </a>

                <div class="hidden lg:flex items-center gap-8">
                    <a href="index.html" class="text-sm font-medium text-gray-600 hover:text-primary transition">Home</a>
                    <a href="services.html" class="text-sm font-medium text-gray-600 hover:text-primary transition">Services</a>
                    <a href="jobs.html" class="text-sm font-bold text-primary">Jobs</a>
                    <a href="consultations.html" class="text-sm font-medium text-gray-600 hover:text-primary transition">Consultations</a>
                    <a href="marketplace.html" class="text-sm font-medium text-gray-600 hover:text-primary transition">Marketplace</a>
                    <a href="findworker.html" class="text-sm font-medium text-gray-600 hover:text-primary transition">Find Workers</a>
                    <a href="faq.html" class="text-sm font-medium text-gray-600 hover:text-primary transition">FAQs</a>
                    <a href="login.html" class="inline-flex items-center gap-2 bg-primary text-white font-semibold px-5 py-2.5 rounded-xl hover:bg-primary/90 transition">
                        <i data-feather="log-in" class="w-4 h-4"></i>
                        Login
                    </a>
                </div>

                <button id="menu-btn" class="lg:hidden p-2 text-gray-600 hover:text-primary transition">
                    <i data-feather="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden lg:hidden border-t border-gray-200/50 bg-white/95 backdrop-blur-md">
            <div class="container mx-auto px-4 py-4 space-y-1">
                <a href="index.html" class="block px-4 py-2.5 text-sm font-medium text-gray-600 hover:text-primary hover:bg-gray-50 rounded-lg transition">Home</a>
                <a href="services.html" class="block px-4 py-2.5 text-sm font-medium text-gray-600 hover:text-primary hover:bg-gray-50 rounded-lg transition">Services</a>
                <a href="jobs.html" class="block px-4 py-2.5 text-sm font-bold text-primary bg-primary/5 rounded-lg">Jobs</a>
                <a href="consultations.html" class="block px-4 py-2.5 text-sm font-medium text-gray-600 hover:text-primary hover:bg-gray-50 rounded-lg transition">Consultations</a>
                <a href="marketplace.html" class="block px-4 py-2.5 text-sm font-medium text-gray-600 hover:text-primary hover:bg-gray-50 rounded-lg transition">Marketplace</a>
                <a href="findworker.html" class="block px-4 py-2.5 text-sm font-medium text-gray-600 hover:text-primary hover:bg-gray-50 rounded-lg transition">Find Workers</a>
                <a href="faq.html" class="block px-4 py-2.5 text-sm font-medium text-gray-600 hover:text-primary hover:bg-gray-50 rounded-lg transition">FAQs</a>
                <a href="login.html" class="flex items-center gap-2 px-4 py-2.5 text-sm font-semibold text-white bg-primary hover:bg-primary/90 rounded-lg transition">
                    <i data-feather="log-in" class="w-4 h-4"></i>
                    Login
                </a>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <header class="pt-32 pb-24 bg-gradient-to-br from-[#020617] via-primary to-blue-700 text-white relative overflow-hidden">
        <div class="absolute inset-0 opacity-20 pointer-events-none">
            <div class="absolute -top-12 left-6 w-72 h-72 bg-white/25 rounded-full blur-3xl"></div>
            <div class="absolute bottom-0 right-0 w-[26rem] h-[26rem] bg-blue-500/30 rounded-full blur-3xl"></div>
        </div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="grid gap-10 lg:grid-cols-[minmax(0,1fr)_420px] items-center">
                <div>
                    <p class="text-xs uppercase tracking-[0.35em] text-white/60 font-black">Jobs</p>
                    <h1 class="text-4xl sm:text-5xl lg:text-6xl font-black leading-tight mt-4">
                        Post a role in minutes. Only verified employers can go live.
                    </h1>
                    <p class="text-base sm:text-lg text-white/80 mt-5 max-w-2xl">
                        All job posts cost ₦1,000 and unlock only when you are logged in, government ID verified, and payment is confirmed. That way workers deal with real employers, and you get a dashboard that tracks applicants in one place.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 mt-10">
                        <a href="#job-listings" class="inline-flex items-center gap-2 bg-white text-primary font-bold px-8 py-4 rounded-2xl shadow-xl hover:-translate-y-0.5 transition">
                            <i data-feather="search" class="w-5 h-5"></i>
                            Browse openings
                        </a>
                        <a href="#post-job" class="inline-flex items-center gap-2 border border-white/60 text-white font-semibold px-8 py-4 rounded-2xl hover:bg-white/10 transition">
                            <i data-feather="plus-circle" class="w-5 h-5"></i>
                            Post a job (₦1,000)
                        </a>
                    </div>
                    <div class="mt-10 grid sm:grid-cols-3 gap-5 text-white/80">
                        <div>
                            <p class="text-3xl font-black text-white">₦1k</p>
                            <p class="text-xs uppercase tracking-[0.3em]">Per listing</p>
                        </div>
                        <div>
                            <p class="text-3xl font-black text-white">ID</p>
                            <p class="text-xs uppercase tracking-[0.3em]">Verification required</p>
                        </div>
                        <div>
                            <p class="text-3xl font-black text-white">24/7</p>
                            <p class="text-xs uppercase tracking-[0.3em]">Applicant tracking</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Job Filters -->
    <section class="py-12 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="max-w-6xl mx-auto bg-white rounded-3xl shadow-xl border border-gray-100 p-6 md:p-8">
                <div class="mb-6">
                    <h2 class="text-2xl font-black text-gray-900 mb-2">Filter Jobs</h2>
                    <p class="text-sm text-gray-600">Find the perfect opportunity for your skills</p>
                </div>

                <form id="jobFilterForm" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                    <div class="lg:col-span-2">
                        <label for="jobSearch" class="block text-sm font-bold text-gray-900 mb-2">Search</label>
                        <div class="relative">
                            <i data-feather="search" class="w-4 h-4 text-gray-400 absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none"></i>
                            <input id="jobSearch" type="search" placeholder="Job title, keyword, or company" class="w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" autocomplete="off">
                        </div>
                    </div>

                    <div>
                        <label for="category" class="block text-sm font-bold text-gray-900 mb-2">Category</label>
                        <select id="category" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none">
                            <option>All Categories</option>
                            <option>Electrician</option>
                            <option>Plumber</option>
                            <option>Cleaner</option>
                            <option>Artisan</option>
                            <option>Driver</option>
                            <option>Carpenter</option>
                            <option>Painter</option>
                            <option>AC Technician</option>
                            <option>Solar Installer</option>
                            <option>Personal Assistant (Day Hire)</option>
                            <option>Doctor Consultation (Affordable)</option>
                            <option>Lawyer Consultation (Affordable)</option>
                            <option>Security Guard</option>
                            <option>IT Support Specialist</option>
                            <option>Welder</option>
                            <option>Mason</option>
                            <option>Event Planner</option>
                            <option>Other</option>
                        </select>
                    </div>

                    <div>
                        <label for="location" class="block text-sm font-bold text-gray-900 mb-2">Location</label>
                        <select id="location" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none">
                            <option>All Locations</option>
                            <option>Lagos – Ikeja</option>
                            <option>Federal Capital Territory – Abuja</option>
                            <option>Rivers – Port Harcourt</option>
                            <option>Kano – Kano</option>
                            <option>Oyo – Ibadan</option>
                            <option>Abia – Umuahia</option>
                            <option>Adamawa – Yola</option>
                            <option>Akwa Ibom – Uyo</option>
                            <option>Anambra – Awka</option>
                            <option>Bauchi – Bauchi</option>
                            <option>Bayelsa – Yenagoa</option>
                            <option>Benue – Makurdi</option>
                            <option>Borno – Maiduguri</option>
                            <option>Cross River – Calabar</option>
                            <option>Delta – Asaba</option>
                            <option>Ebonyi – Abakaliki</option>
                            <option>Edo – Benin City</option>
                            <option>Ekiti – Ado-Ekiti</option>
                            <option>Enugu – Enugu</option>
                            <option>Gombe – Gombe</option>
                            <option>Imo – Owerri</option>
                        </select>
                    </div>

                    <div>
                        <label for="experience" class="block text-sm font-bold text-gray-900 mb-2">Experience</label>
                        <select id="experience" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none">
                            <option>Any Experience</option>
                            <option>Entry Level</option>
                            <option>1-3 Years</option>
                            <option>3-5 Years</option>
                            <option>5+ Years</option>
                        </select>
                    </div>

                    <div class="flex items-end">
                        <button type="submit" class="w-full bg-primary text-white font-bold py-3.5 rounded-xl hover:bg-primary/90 transition-all shadow-lg shadow-primary/25">
                            Search Jobs
                        </button>
                    </div>
                </form>

                <div class="mt-6 pt-6 border-t border-gray-100">
                    <p class="text-sm text-gray-600 text-center">
                        Can't find the exact role you need?
                        <a href="contact.html" class="font-bold text-primary hover:text-primary/80">Contact us</a>
                        and we'll match you manually.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Job Listings -->
    <section id="job-listings" class="py-20 lg:py-32 bg-white">
        <div class="container mx-auto px-4">
            <div class="max-w-7xl mx-auto">
                <div class="mb-12 text-center">
                    <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-4">Available Jobs</h2>
                    <p class="text-xl text-gray-600">Discover opportunities from verified employers</p>
                </div>

                <div id="jobCardGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Jobs will be loaded dynamically from the API -->
                </div>

                <p id="jobsEmptyState" class="hidden text-center text-gray-500 border-2 border-dashed border-gray-200 rounded-3xl py-12 mt-10 text-sm font-semibold">
                    No jobs match this search yet. Try adjusting the filters or check back later.
                </p>

                <div class="mt-12 text-center">
                    <button id="loadMoreJobs" class="inline-flex items-center gap-2 bg-primary text-white font-bold px-8 py-4 rounded-xl hover:bg-primary/90 transition-all shadow-lg shadow-primary/25 disabled:opacity-40 disabled:cursor-not-allowed">
                        Load More Jobs
                        <i data-feather="refresh-cw" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Post Job Section -->
    <section id="post-job" class="py-20 lg:py-32 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="mb-12 text-center">
                    <h2 class="text-4xl md:text-5xl font-black text-gray-900 mb-4">Post a Job</h2>
                    <p class="text-xl text-gray-600">Connect with skilled professionals across Nigeria</p>
                </div>

                <div class="bg-white rounded-3xl shadow-2xl border border-gray-100 p-8 md:p-10">
                    <div class="mb-8 rounded-2xl border-2 border-primary/20 bg-primary/5 px-6 py-4">
                        <div class="flex items-start gap-3">
                            <i data-feather="info" class="w-5 h-5 text-primary flex-shrink-0 mt-0.5"></i>
                            <div>
                                <p class="text-sm text-primary font-semibold mb-1">Need a verified employer account</p>
                                <p class="text-sm text-gray-700">
                                    Only logged-in employers with government ID verification <strong>and</strong> a paid ₦1,000 post credit can publish roles.
                                    <a href="register.html?account=employer" class="font-bold underline hover:text-primary">Create an account</a> or
                                    <a href="login.html?account=employer" class="font-bold underline hover:text-primary">sign in</a> to get verified, then pay inside the dashboard.
                                </p>
                                <p id="postJobGateMessage" class="text-xs text-gray-500 mt-2">
                                    Button stays locked until those requirements are met.
                                </p>
                            </div>
                        </div>
                    </div>

                    <form id="jobPostForm" class="space-y-6" novalidate>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="job-title" class="block text-sm font-bold text-gray-900 mb-2">Job Title*</label>
                                <input type="text" id="job-title" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="e.g. Electrician Needed" required>
                            </div>

                            <div>
                                <label for="job-category" class="block text-sm font-bold text-gray-900 mb-2">Category*</label>
                                <select id="job-category" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" required>
                                    <option value="">Select Category</option>
                                    <option>Electrician</option>
                                    <option>Plumber</option>
                                    <option>Cleaner</option>
                                    <option>Carpenter</option>
                                    <option>Painter</option>
                                    <option>AC Technician</option>
                                    <option>Generator Technician</option>
                                    <option>Personal Assistant (Day Hire)</option>
                                    <option>Chef / Caterer</option>
                                    <option>Security Guard</option>
                                    <option>Driver</option>
                                    <option>Event Planner</option>
                                    <option>IT Support Specialist</option>
                                    <option>Solar Installer</option>
                                    <option>Healthcare Professional</option>
                                    <option>Legal Consultant</option>
                                    <option>Other</option>
                                </select>
                            </div>

                            <div>
                                <label for="job-location" class="block text-sm font-bold text-gray-900 mb-2">Location*</label>
                                <select id="job-location" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" required>
                                    <option value="">Select Location</option>
                                    <option>Lagos – Ikeja</option>
                                    <option>Federal Capital Territory – Abuja</option>
                                    <option>Rivers – Port Harcourt</option>
                                    <option>Kano – Kano</option>
                                    <option>Oyo – Ibadan</option>
                                    <option>Enugu – Enugu</option>
                                    <option>Kaduna – Kaduna</option>
                                </select>
                            </div>

                            <div>
                                <label for="job-type" class="block text-sm font-bold text-gray-900 mb-2">Job Type*</label>
                                <select id="job-type" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" required>
                                    <option value="">Select Type</option>
                                    <option>Full-time</option>
                                    <option>Part-time</option>
                                    <option>Contract</option>
                                    <option>Project-based</option>
                                    <option>Temporary</option>
                                </select>
                            </div>

                            <div>
                                <label for="job-salary" class="block text-sm font-bold text-gray-900 mb-2">Salary/Rate*</label>
                                <input type="text" id="job-salary" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="e.g. ₦25,000/day" required>
                            </div>

                            <div>
                                <label for="job-experience" class="block text-sm font-bold text-gray-900 mb-2">Experience Level*</label>
                                <select id="job-experience" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" required>
                                    <option value="">Select Experience</option>
                                    <option>Entry Level</option>
                                    <option>1-3 Years</option>
                                    <option>3-5 Years</option>
                                    <option>5+ Years</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label for="job-description" class="block text-sm font-bold text-gray-900 mb-2">Job Description*</label>
                            <textarea id="job-description" rows="5" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="Describe the job responsibilities and requirements..." required></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-900 mb-4">Your Contact Information*</label>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <input type="text" id="contact-name" class="px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="Your Name" required>
                                <input type="email" id="contact-email" class="px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="Your Email" required>
                                <input type="tel" id="contact-phone" class="px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none md:col-span-2" placeholder="Your Phone Number" required>
                            </div>
                        </div>

                        <div class="flex justify-end pt-4">
                            <button type="button" id="submitJobPosting" disabled class="inline-flex items-center gap-2 bg-primary text-white font-bold px-8 py-4 rounded-xl shadow-lg shadow-primary/25 opacity-60 cursor-not-allowed">
                                Post Job
                                <i data-feather="send" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="site-footer__inner container mx-auto px-4 lg:px-6">
      <div class="site-footer__grid">
        <div class="site-footer__brand">
          <img src="images/logo.png" alt="Sirius logo">
          <p>One platform for trusted professionals, frontline artisans, and the clients who rely on them across Nigeria.</p>
          <div class="site-footer__social">
            <a href="https://web.facebook.com/profile.php?id=61582342397507" target="_blank" rel="noopener"><i data-feather="facebook"></i></a>
            <a href="https://twitter.com/SiriusOddJobs" target="_blank" rel="noopener"><i data-feather="twitter"></i></a>
            <a href="https://www.instagram.com/siriusjobss" target="_blank" rel="noopener"><i data-feather="instagram"></i></a>
            <a href="https://www.linkedin.com/company/siriusjobsng/" target="_blank" rel="noopener"><i data-feather="linkedin"></i></a>
          </div>
        </div>
        <div>
          <h4>Platform</h4>
          <ul class="space-y-2">
            <li><a href="about.html">About</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="jobs.html">Jobs</a></li>
            <li><a href="consultations.html">Consultations</a></li>
            <li><a href="marketplace.html">Marketplace</a></li>
          </ul>
        </div>
        <div>
          <h4>Support</h4>
          <ul class="space-y-2">
            <li><a href="contact.html">Contact</a></li>
            <li><a href="faq.html">FAQs</a></li>
            <li><a href="privacypolicy.html">Privacy Policy</a></li>
            <li><a href="terms.html">Terms of Service</a></li>
            <li><a href="verify.html">Verify Credentials</a></li>
          </ul>
        </div>
        <div>
          <h4>Contact</h4>
          <ul class="space-y-2">
            <li><span>WhatsApp: 0704 447 0559</span></li>
            <li><span>Email: support@siriusjobsng.com</span></li>
            <li><span>Port Harcourt, Rivers State</span></li>
          </ul>
        </div>
      </div>
      <div class="site-footer__bottom">
        <p>© 2025 Sirius. All rights reserved.</p>
        <div class="flex gap-4"><span>Built for Nigerian businesses & talent.</span></div>
      </div>
    </div>
  </footer>



    <!-- Apply Modal -->
    <div id="applyModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center px-4 hidden z-50">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden">
            <div class="px-6 py-5 border-b border-gray-100 flex items-center justify-between">
                <div>
                    <h3 class="text-xl font-black text-gray-900">Apply for this job</h3>
                    <p id="applyModalJob" class="text-sm text-gray-500"></p>
                </div>
                <button id="applyModalClose" class="text-gray-500 hover:text-primary transition p-2">
                    <i data-feather="x" class="w-6 h-6"></i>
                </button>
            </div>

            <form id="applyForm" class="p-6 space-y-5">
                <input type="hidden" id="applyJobId">

                <div>
                    <label for="expectedPay" class="block text-sm font-bold text-gray-900 mb-2">Expected pay (optional)</label>
                    <input type="number" id="expectedPay" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="e.g. 25000">
                </div>

                <div>
                    <label for="supportingDocs" class="block text-sm font-bold text-gray-900 mb-2">Upload CV & supporting documents</label>
                    <input type="file" id="supportingDocs" class="w-full text-sm text-gray-600 border-2 border-dashed border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:border-primary transition" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" multiple>
                    <p class="text-xs text-gray-500 mt-2">Attach your CV, certifications, or reference letters (PDF, Word or image files, max 10MB each).</p>
                </div>

                <div>
                    <label for="coverLetter" class="block text-sm font-bold text-gray-900 mb-2">Cover letter*</label>
                    <textarea id="coverLetter" rows="4" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary focus:ring-0 transition outline-none" placeholder="Tell the employer why you're a great fit" required></textarea>
                </div>

                <p class="text-xs text-gray-500 bg-gray-50 rounded-xl px-4 py-3">
                    Submitting this application shares your verified profile with the employer.
                </p>

                <div class="flex items-center justify-end gap-3 pt-4">
                    <button type="button" id="applyModalCancel" class="px-5 py-2.5 text-sm font-bold text-gray-600 hover:text-gray-900 transition">Cancel</button>
                    <button type="submit" class="inline-flex items-center gap-2 px-6 py-3 text-sm font-bold text-white bg-primary rounded-xl hover:bg-primary/90 transition shadow-lg shadow-primary/25">
                        Submit application
                        <i data-feather="send" class="w-4 h-4"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Apply Success Toast -->
    <div id="applyToast" class="fixed bottom-6 right-6 bg-white border-2 border-green-200 shadow-2xl rounded-2xl px-6 py-4 flex items-center gap-3 text-sm text-green-700 hidden z-50">
        <div class="w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0">
            <i data-feather="check-circle" class="w-5 h-5 text-green-600"></i>
        </div>
        <span class="font-medium">Application submitted! We'll notify you when the employer responds.</span>
    </div>

    <script src="session-utils.js"></script>
    <script>
        // Mobile menu toggle
        document.getElementById('menu-btn').addEventListener('click', function() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        const applyModal = document.getElementById('applyModal');
        const applyModalJob = document.getElementById('applyModalJob');
        const applyJobId = document.getElementById('applyJobId');
        const applyForm = document.getElementById('applyForm');
        const applyModalClose = document.getElementById('applyModalClose');
        const applyModalCancel = document.getElementById('applyModalCancel');
        const applyToast = document.getElementById('applyToast');
        const supportingDocs = document.getElementById('supportingDocs');

        function openApplyModal(jobId, jobTitle) {
            applyJobId.value = jobId;
            applyModalJob.textContent = jobTitle;
            applyModal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        }

        function closeApplyModal() {
            applyModal.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            applyForm.reset();
            if (supportingDocs) {
                supportingDocs.value = '';
            }
        }

        function attachApplyHandlers() {
            document.querySelectorAll('.applyJobLink').forEach(btn => {
                btn.addEventListener('click', (event) => {
                    event.preventDefault();
                    const card = event.currentTarget.closest('.job-card');
                    if (!card) return;
                    openApplyModal(card.dataset.jobId, card.dataset.jobTitle);
                });
            });
        }

        applyModalClose.addEventListener('click', closeApplyModal);
        applyModalCancel.addEventListener('click', closeApplyModal);
        applyModal.addEventListener('click', (event) => {
            if (event.target === applyModal) closeApplyModal();
        });

        applyForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            const coverLetter = document.getElementById('coverLetter').value.trim();
            if (!coverLetter) {
                alert('Please provide a short cover letter.');
                return;
            }
            const expectedPayValue = Number(document.getElementById('expectedPay').value);
            const payload = {
                jobId: applyJobId.value,
                coverLetter,
                expectedPay: !Number.isNaN(expectedPayValue) && expectedPayValue > 0 ? expectedPayValue : undefined,
                supportingDocuments: [],
            };
            if (supportingDocs && supportingDocs.files.length) {
                const encoded = await Promise.all(
                    Array.from(supportingDocs.files).map(file => new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            data: reader.result,
                        });
                        reader.onerror = () => reject(new Error('Could not read file.'));
                        reader.readAsDataURL(file);
                    }))
                );
                payload.supportingDocuments = encoded;
            }
            try {
                const response = await fetch('/api/applications', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) {
                    const body = await response.json().catch(() => ({ message: 'Unable to submit application' }));
                    throw new Error(body.message || 'Unable to submit application');
                }
                closeApplyModal();
                applyToast.classList.remove('hidden');
                setTimeout(() => applyToast.classList.add('hidden'), 4000);
            } catch (error) {
                alert(error.message || 'Something went wrong. Please try again.');
            }
        });

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && !applyModal.classList.contains('hidden')) {
                closeApplyModal();
            }
        });

        // Dynamic job board logic
        const jobGrid = document.getElementById('jobCardGrid');
        const jobsEmptyState = document.getElementById('jobsEmptyState');
        const loadMoreBtn = document.getElementById('loadMoreJobs');
        const jobFilterForm = document.getElementById('jobFilterForm');
        const jobSearchInput = document.getElementById('jobSearch');
        const categorySelect = document.getElementById('category');
        const locationSelect = document.getElementById('location');
        const experienceSelect = document.getElementById('experience');
        const JOB_BATCH = 6;
        const currency = new Intl.NumberFormat('en-NG', { style: 'currency', currency: 'NGN', maximumFractionDigits: 0 });

        let allJobs = [];
        let filteredJobs = [];
        let jobsVisible = JOB_BATCH;

        const toPlainText = value => (value || '').replace(/<[^>]+>/g, '');

        function mapApiJob(job) {
            const description = toPlainText(job.description ?? 'Full duties shared after you apply.');
            const budgetLabel = typeof job.budget === 'number' ? currency.format(job.budget) : 'Budget shared privately';
            const firstSkill = Array.isArray(job.skills) && job.skills.length ? job.skills[0] : 'General Service';
            return {
                id: job._id,
                title: job.title,
                description,
                category: firstSkill,
                location: job.location ?? 'Nigeria',
                jobType: job.status === 'open' ? 'Open role' : job.status,
                rateLabel: budgetLabel,
                rateUnit: 'role',
                company: job.employer?.name ?? 'Verified Employer',
                experienceLabel: job.experience ?? 'Any Experience',
                icon: 'briefcase',
                raw: job,
            };
        }

        function buildJobCard(job) {
            const shortDescription =
                job.description.length > 160 ? `${job.description.slice(0, 157)}…` : job.description;
            const experienceChip =
                job.experienceLabel && job.experienceLabel !== 'Any Experience'
                    ? `<span class="inline-flex items-center gap-1 bg-gray-100 text-gray-700 text-xs font-bold px-3 py-1.5 rounded-full">
                            <i data-feather="award" class="w-3 h-3"></i>
                            ${job.experienceLabel}
                        </span>`
                    : '';
            const rateUnitLabel = job.rateUnit ? `<span class="text-sm font-medium text-gray-500">/${job.rateUnit}</span>` : '';
            return `
                <div class="job-card bg-gradient-to-br from-gray-50 to-white border-2 border-gray-100 hover:border-primary rounded-3xl p-6 transition-all" data-job-id="${job.id}" data-job-title="${job.title}">
                    <div class="w-14 h-14 bg-primary/10 rounded-2xl flex items-center justify-center mb-4">
                        <i data-feather="${job.icon || 'briefcase'}" class="text-primary w-7 h-7"></i>
                    </div>
                    <h3 class="text-xl font-black text-gray-900 mb-2">${job.title}</h3>
                    <p class="text-gray-600 mb-4 text-sm leading-relaxed">${shortDescription}</p>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="inline-flex items-center gap-1 bg-primary/10 text-primary text-xs font-bold px-3 py-1.5 rounded-full">
                            <i data-feather="tag" class="w-3 h-3"></i>
                            ${job.category}
                        </span>
                        <span class="inline-flex items-center gap-1 bg-gray-100 text-gray-700 text-xs font-bold px-3 py-1.5 rounded-full">
                            <i data-feather="map-pin" class="w-3 h-3"></i>
                            ${job.location}
                        </span>
                        <span class="inline-flex items-center gap-1 bg-gray-100 text-gray-700 text-xs font-bold px-3 py-1.5 rounded-full">
                            <i data-feather="clock" class="w-3 h-3"></i>
                            ${job.jobType}
                        </span>
                        ${experienceChip}
                    </div>
                    <div class="flex justify-between items-center pt-4 border-t border-gray-100">
                        <span class="text-2xl font-black text-primary">
                            ${job.rateLabel}${rateUnitLabel}
                        </span>
                        <a href="#" class="applyJobLink inline-flex items-center gap-2 bg-primary text-white font-bold px-5 py-2.5 rounded-xl hover:bg-primary/90 transition" data-apply="true">
                            Apply
                            <i data-feather="arrow-right" class="w-4 h-4"></i>
                        </a>
                    </div>
                </div>
            `;
        }

        function renderJobCards(reset = false) {
            if (!jobGrid) return;
            if (reset) {
                jobsVisible = JOB_BATCH;
            }
            if (!filteredJobs.length) {
                jobGrid.innerHTML = '';
                jobsEmptyState?.classList.remove('hidden');
                loadMoreBtn?.setAttribute('disabled', 'disabled');
                return;
            }
            jobsEmptyState?.classList.add('hidden');
            const jobsToRender = filteredJobs.slice(0, jobsVisible);
            jobGrid.innerHTML = jobsToRender.map(buildJobCard).join('');
            attachApplyHandlers();
            feather.replace();
            if (loadMoreBtn) {
                if (jobsVisible >= filteredJobs.length) {
                    loadMoreBtn.setAttribute('disabled', 'disabled');
                } else {
                    loadMoreBtn.removeAttribute('disabled');
                }
            }
        }

        function applyFilters(event) {
            event?.preventDefault();
            const categoryValue = (categorySelect?.value || '').toLowerCase();
            const locationValue = (locationSelect?.value || '').toLowerCase();
            const experienceValue = experienceSelect?.value;
            const searchValue = (jobSearchInput?.value || '').trim().toLowerCase();

            filteredJobs = allJobs.filter(job => {
                const matchesCategory =
                    !categoryValue ||
                    categoryValue === 'all categories' ||
                    job.category.toLowerCase().includes(categoryValue);
                const matchesLocation =
                    !locationValue ||
                    locationValue === 'all locations' ||
                    job.location.toLowerCase().includes(locationValue);
                const matchesExperience =
                    !experienceValue ||
                    experienceValue === 'Any Experience' ||
                    job.experienceLabel === experienceValue ||
                    job.experienceLabel === 'Any Experience';
                const matchesSearch =
                    !searchValue ||
                    job.title.toLowerCase().includes(searchValue) ||
                    job.description.toLowerCase().includes(searchValue) ||
                    job.company.toLowerCase().includes(searchValue);
                return matchesCategory && matchesLocation && matchesExperience && matchesSearch;
            });
            renderJobCards(true);
        }

        let searchDebounce;
        jobFilterForm?.addEventListener('submit', applyFilters);
        document.querySelectorAll('#jobFilterForm select').forEach(select => {
            select.addEventListener('change', () => applyFilters());
        });
        jobSearchInput?.addEventListener('input', () => {
            clearTimeout(searchDebounce);
            searchDebounce = setTimeout(() => applyFilters(), 200);
        });

        loadMoreBtn?.addEventListener('click', () => {
            jobsVisible = Math.min(jobsVisible + JOB_BATCH, filteredJobs.length);
            renderJobCards();
        });

        async function fetchJobs() {
            try {
                const params = new URLSearchParams({ status: 'open', limit: '60' });
                const response = await fetch(`/api/v2/jobs?${params}`);
                if (!response.ok) {
                    throw new Error('Unable to load jobs');
                }
                const payload = await response.json();
                const data = payload.data?.jobs ?? [];
                allJobs = Array.isArray(data) ? data.map(mapApiJob) : [];
            } catch (error) {
                console.warn('Unable to load jobs', error);
                allJobs = [];
            }
            filteredJobs = [...allJobs];
            renderJobCards(true);
        }
        // Post job gating
        const postJobBtn = document.getElementById('submitJobPosting');
        const postJobMessage = document.getElementById('postJobGateMessage');

        function evaluatePostGate() {
            if (!postJobBtn) return;
            const employerPayload = window.SiriusSession?.parse('siriusEmployerAuth');
            const loggedIn = Boolean(employerPayload?.token);
            const govVerified = Boolean(employerPayload?.employerProfile?.verified);
            const hasCredit =
                sessionStorage.getItem('siriusPaidJobCredit') === 'true' ||
                sessionStorage.getItem('siriusPremiumEmployer') === 'true';

            if (loggedIn && govVerified && hasCredit) {
                postJobBtn.disabled = false;
                postJobBtn.classList.remove('opacity-60', 'cursor-not-allowed');
                postJobBtn.innerHTML = 'Go to Employer Dashboard <i data-feather="external-link" class="w-5 h-5"></i>';
                postJobBtn.addEventListener('click', () => {
                    window.location.href = 'employer-dashboard.html#post-job';
                }, { once: true });
                if (postJobMessage) {
                    postJobMessage.textContent = 'Credit detected. Continue in your employer dashboard to publish this role.';
                }
            } else {
                postJobBtn.disabled = true;
                postJobBtn.classList.add('opacity-60', 'cursor-not-allowed');
                postJobBtn.innerHTML = 'Locked – verify & pay ₦1,000 <i data-feather="lock" class="w-5 h-5"></i>';
                if (postJobMessage) {
                    postJobMessage.textContent = 'Log in as a verified employer and settle the ₦1,000 post fee in the employer dashboard to unlock this button.';
                }
            }
            feather.replace();
        }

        // Bootstrap UI
        attachApplyHandlers();
        fetchJobs();
        evaluatePostGate();
        window.addEventListener('storage', (event) => {
            if (event.key === 'siriusPaidJobCredit' || event.key === 'siriusPremiumEmployer') {
                evaluatePostGate();
            }
        });

        feather.replace();
    </script>
    <script src="assistant.js"></script>
  <script src="assets/site-shell.js" defer></script>
</body>
</html>
